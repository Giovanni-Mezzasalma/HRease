input {
    kafka {
        bootstrap_servers => "${KAFKA_HOST}:9092"
        topics => ["${LOGGING_SERVICE_NAME}"]
        add_field => { "@topic" => "${LOGGING_SERVICE_NAME}" }
    }
}

## Add your filters / logstash plugins configuration here
filter {
    json {
        source => "message"
        remove_field => ["message"]
    }
}

output {
    #file { # Only for DEBUG
    #    path => "/opt/logstash/output/output.jsonl"
    #}
	elasticsearch {
		hosts => "${ES_HOST}:9200"
		ecs_compatibility => disabled
        index => "${LOGGING_SERVICE_NAME}"
        document_id => "%{${LOGGING_SERVICE_UID_KEY}}"
	}
}